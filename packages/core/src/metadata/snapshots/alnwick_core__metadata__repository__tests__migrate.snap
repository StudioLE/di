---
source: packages/core/src/metadata/repository.rs
expression: get_db_structure(&metadata).await
---
CREATE TABLE "seaql_migrations" (
  "version" varchar NOT NULL PRIMARY KEY,
  "applied_at" integer NOT NULL
)

CREATE TABLE "podcasts" (
  "primary_key" integer NOT NULL PRIMARY KEY AUTOINCREMENT,
  "slug" varchar NOT NULL UNIQUE,
  "title" varchar NOT NULL,
  "description" text NOT NULL,
  "image" varchar NULL,
  "language" varchar NULL,
  "categories" json_text NOT NULL,
  "explicit" boolean NOT NULL,
  "author" varchar NULL,
  "link" varchar NULL,
  "kind" varchar NULL,
  "copyright" varchar NULL,
  "new_feed_url" varchar NULL,
  "generator" varchar NULL
)

CREATE TABLE sqlite_sequence(name, seq)

CREATE TABLE "episodes" (
  "primary_key" integer NOT NULL PRIMARY KEY AUTOINCREMENT,
  "podcast_key" integer NULL,
  "source_id" varchar NOT NULL,
  "title" varchar NOT NULL,
  "source_url" varchar NOT NULL,
  "source_file_size" integer NOT NULL,
  "source_content_type" varchar NOT NULL,
  "published_at" timestamp_with_timezone_text NOT NULL,
  "description" text NULL,
  "source_duration" integer NULL,
  "image" varchar NULL,
  "explicit" boolean NULL,
  "itunes_title" varchar NULL,
  "episode" integer NULL,
  "season" integer NULL,
  "kind" varchar NULL,
  FOREIGN KEY ("podcast_key") REFERENCES "podcasts" ("primary_key") ON DELETE CASCADE ON UPDATE CASCADE
)
